{"ast":null,"code":"import _slicedToArray from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useRef}from'react';import{IonToolbar,IonContent,IonPage,IonButtons,IonTitle,IonMenuButton,IonSegment,IonSegmentButton,IonButton,IonIcon,IonSearchbar,IonRefresher,IonRefresherContent,IonToast,IonModal,IonHeader,getConfig}from'@ionic/react';import{options,search}from'ionicons/icons';import SessionList from'../components/SessionList';import SessionListFilter from'../components/SessionListFilter';import'./SchedulePage.scss';import ShareSocialFab from'../components/ShareSocialFab';import*as selectors from'../data/selectors';import{connect}from'../data/connect';import{setSearchText}from'../data/sessions/sessions.actions';var SchedulePage=function SchedulePage(_ref){var favoritesSchedule=_ref.favoritesSchedule,schedule=_ref.schedule,setSearchText=_ref.setSearchText,mode=_ref.mode;var _useState=useState('all'),_useState2=_slicedToArray(_useState,2),segment=_useState2[0],setSegment=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showSearchbar=_useState4[0],setShowSearchbar=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),showFilterModal=_useState6[0],setShowFilterModal=_useState6[1];var ionRefresherRef=useRef(null);var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),showCompleteToast=_useState8[0],setShowCompleteToast=_useState8[1];var pageRef=useRef(null);var ios=mode==='ios';var doRefresh=function doRefresh(){setTimeout(function(){ionRefresherRef.current.complete();setShowCompleteToast(true);},2500);};return/*#__PURE__*/React.createElement(IonPage,{ref:pageRef,id:\"schedule-page\"},/*#__PURE__*/React.createElement(IonHeader,{translucent:true},/*#__PURE__*/React.createElement(IonToolbar,null,!showSearchbar&&/*#__PURE__*/React.createElement(IonButtons,{slot:\"start\"},/*#__PURE__*/React.createElement(IonMenuButton,null)),ios&&/*#__PURE__*/React.createElement(IonSegment,{value:segment,onIonChange:function onIonChange(e){return setSegment(e.detail.value);}},/*#__PURE__*/React.createElement(IonSegmentButton,{value:\"all\"},\"All\"),/*#__PURE__*/React.createElement(IonSegmentButton,{value:\"favorites\"},\"Favorites\")),!ios&&!showSearchbar&&/*#__PURE__*/React.createElement(IonTitle,null,\"Schedule\"),showSearchbar&&/*#__PURE__*/React.createElement(IonSearchbar,{showCancelButton:\"always\",placeholder:\"Search\",onIonChange:function onIonChange(e){return setSearchText(e.detail.value);},onIonCancel:function onIonCancel(){return setShowSearchbar(false);}}),/*#__PURE__*/React.createElement(IonButtons,{slot:\"end\"},!ios&&!showSearchbar&&/*#__PURE__*/React.createElement(IonButton,{onClick:function onClick(){return setShowSearchbar(true);}},/*#__PURE__*/React.createElement(IonIcon,{slot:\"icon-only\",icon:search})),!showSearchbar&&/*#__PURE__*/React.createElement(IonButton,{onClick:function onClick(){return setShowFilterModal(true);}},mode==='ios'?'Filter':/*#__PURE__*/React.createElement(IonIcon,{icon:options,slot:\"icon-only\"})))),!ios&&/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonSegment,{value:segment,onIonChange:function onIonChange(e){return setSegment(e.detail.value);}},/*#__PURE__*/React.createElement(IonSegmentButton,{value:\"all\"},\"All\"),/*#__PURE__*/React.createElement(IonSegmentButton,{value:\"favorites\"},\"Favorites\")))),/*#__PURE__*/React.createElement(IonContent,{fullscreen:true},/*#__PURE__*/React.createElement(IonHeader,{collapse:\"condense\"},/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonTitle,{size:\"large\"},\"Schedule\")),/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonSearchbar,{placeholder:\"Search\",onIonChange:function onIonChange(e){return setSearchText(e.detail.value);}}))),/*#__PURE__*/React.createElement(IonRefresher,{slot:\"fixed\",ref:ionRefresherRef,onIonRefresh:doRefresh},/*#__PURE__*/React.createElement(IonRefresherContent,null)),/*#__PURE__*/React.createElement(IonToast,{isOpen:showCompleteToast,message:\"Refresh complete\",duration:2000,onDidDismiss:function onDidDismiss(){return setShowCompleteToast(false);}}),/*#__PURE__*/React.createElement(SessionList,{schedule:schedule,listType:segment,hide:segment==='favorites'}),/*#__PURE__*/React.createElement(SessionList// schedule={schedule}\n,{schedule:favoritesSchedule,listType:segment,hide:segment==='all'})),/*#__PURE__*/React.createElement(IonModal,{isOpen:showFilterModal,onDidDismiss:function onDidDismiss(){return setShowFilterModal(false);},swipeToClose:true,presentingElement:pageRef.current,cssClass:\"session-list-filter\"},/*#__PURE__*/React.createElement(SessionListFilter,{onDismissModal:function onDismissModal(){return setShowFilterModal(false);}})),/*#__PURE__*/React.createElement(ShareSocialFab,null));};export default connect({mapStateToProps:function mapStateToProps(state){return{schedule:selectors.getSearchedSchedule(state),favoritesSchedule:selectors.getGroupedFavorites(state),mode:getConfig().get('mode')};},mapDispatchToProps:{setSearchText:setSearchText},component:React.memo(SchedulePage)});","map":{"version":3,"sources":["/home/fazna/cleanit/src/pages/SchedulePage.tsx"],"names":["React","useState","useRef","IonToolbar","IonContent","IonPage","IonButtons","IonTitle","IonMenuButton","IonSegment","IonSegmentButton","IonButton","IonIcon","IonSearchbar","IonRefresher","IonRefresherContent","IonToast","IonModal","IonHeader","getConfig","options","search","SessionList","SessionListFilter","ShareSocialFab","selectors","connect","setSearchText","SchedulePage","favoritesSchedule","schedule","mode","segment","setSegment","showSearchbar","setShowSearchbar","showFilterModal","setShowFilterModal","ionRefresherRef","showCompleteToast","setShowCompleteToast","pageRef","ios","doRefresh","setTimeout","current","complete","e","detail","value","mapStateToProps","state","getSearchedSchedule","getGroupedFavorites","get","mapDispatchToProps","component","memo"],"mappings":"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","sourcesContent":["import React, { useState, useRef } from 'react';\n\nimport { IonToolbar, IonContent, IonPage, IonButtons, IonTitle, IonMenuButton, IonSegment, IonSegmentButton, IonButton, IonIcon, IonSearchbar, IonRefresher, IonRefresherContent, IonToast, IonModal, IonHeader, getConfig } from '@ionic/react';\nimport { options, search } from 'ionicons/icons';\n\nimport SessionList from '../components/SessionList';\nimport SessionListFilter from '../components/SessionListFilter';\nimport './SchedulePage.scss'\n\nimport ShareSocialFab from '../components/ShareSocialFab';\n\nimport * as selectors from '../data/selectors';\nimport { connect } from '../data/connect';\nimport { setSearchText } from '../data/sessions/sessions.actions';\nimport { Schedule } from '../models/Schedule';\n\ninterface OwnProps { }\n\ninterface StateProps {\n  schedule: Schedule;\n  favoritesSchedule: Schedule;\n  mode: 'ios' | 'md'\n}\n\ninterface DispatchProps {\n  setSearchText: typeof setSearchText;\n}\n\ntype SchedulePageProps = OwnProps & StateProps & DispatchProps;\n\nconst SchedulePage: React.FC<SchedulePageProps> = ({ favoritesSchedule, schedule, setSearchText, mode }) => {\n  const [segment, setSegment] = useState<'all' | 'favorites'>('all');\n  const [showSearchbar, setShowSearchbar] = useState<boolean>(false);\n  const [showFilterModal, setShowFilterModal] = useState(false);\n  const ionRefresherRef = useRef<HTMLIonRefresherElement>(null);\n  const [showCompleteToast, setShowCompleteToast] = useState(false);\n\n  const pageRef = useRef<HTMLElement>(null);\n\n  const ios = mode === 'ios';\n\n  const doRefresh = () => {\n    setTimeout(() => {\n      ionRefresherRef.current!.complete();\n      setShowCompleteToast(true);\n    }, 2500)\n  };\n\n  return (\n    <IonPage ref={pageRef} id=\"schedule-page\">\n      <IonHeader translucent={true}>\n        <IonToolbar>\n          {!showSearchbar &&\n            <IonButtons slot=\"start\">\n              <IonMenuButton />\n            </IonButtons>\n          }\n          {ios &&\n            <IonSegment value={segment} onIonChange={(e) => setSegment(e.detail.value as any)}>\n              <IonSegmentButton value=\"all\">\n                All\n              </IonSegmentButton>\n              <IonSegmentButton value=\"favorites\">\n                Favorites\n              </IonSegmentButton>\n            </IonSegment>\n          }\n          {!ios && !showSearchbar &&\n            <IonTitle>Schedule</IonTitle>\n          }\n          {showSearchbar &&\n            <IonSearchbar showCancelButton=\"always\" placeholder=\"Search\" onIonChange={(e: CustomEvent) => setSearchText(e.detail.value)} onIonCancel={() => setShowSearchbar(false)}></IonSearchbar>\n          }\n\n          <IonButtons slot=\"end\">\n            {!ios && !showSearchbar &&\n              <IonButton onClick={() => setShowSearchbar(true)}>\n                <IonIcon slot=\"icon-only\" icon={search}></IonIcon>\n              </IonButton>\n            }\n            {!showSearchbar &&\n              <IonButton onClick={() => setShowFilterModal(true)}>\n                {mode === 'ios' ? 'Filter' : <IonIcon icon={options} slot=\"icon-only\" />}\n              </IonButton>\n            }\n          </IonButtons>\n        </IonToolbar>\n\n        {!ios &&\n          <IonToolbar>\n            <IonSegment value={segment} onIonChange={(e) => setSegment(e.detail.value as any)}>\n              <IonSegmentButton value=\"all\">\n                All\n              </IonSegmentButton>\n              <IonSegmentButton value=\"favorites\">\n                Favorites\n              </IonSegmentButton>\n            </IonSegment>\n          </IonToolbar>\n        }\n      </IonHeader>\n\n      <IonContent fullscreen={true}>\n        <IonHeader collapse=\"condense\">\n          <IonToolbar>\n            <IonTitle size=\"large\">Schedule</IonTitle>\n          </IonToolbar>\n          <IonToolbar>\n            <IonSearchbar placeholder=\"Search\" onIonChange={(e: CustomEvent) => setSearchText(e.detail.value)}></IonSearchbar>\n          </IonToolbar>\n        </IonHeader>\n\n        <IonRefresher slot=\"fixed\" ref={ionRefresherRef} onIonRefresh={doRefresh}>\n          <IonRefresherContent />\n        </IonRefresher>\n\n        <IonToast\n          isOpen={showCompleteToast}\n          message=\"Refresh complete\"\n          duration={2000}\n          onDidDismiss={() => setShowCompleteToast(false)}\n        />\n\n        <SessionList\n          schedule={schedule}\n          listType={segment}\n          hide={segment === 'favorites'}\n        />\n        <SessionList\n          // schedule={schedule}\n          schedule={favoritesSchedule}\n          listType={segment}\n          hide={segment === 'all'}\n        />\n      </IonContent>\n\n      <IonModal\n        isOpen={showFilterModal}\n        onDidDismiss={() => setShowFilterModal(false)}\n        swipeToClose={true}\n        presentingElement={pageRef.current!}\n        cssClass=\"session-list-filter\"\n      >\n        <SessionListFilter\n          onDismissModal={() => setShowFilterModal(false)}\n        />\n      </IonModal>\n\n      <ShareSocialFab />\n\n    </IonPage>\n  );\n};\n\nexport default connect<OwnProps, StateProps, DispatchProps>({\n  mapStateToProps: (state) => ({\n    schedule: selectors.getSearchedSchedule(state),\n    favoritesSchedule: selectors.getGroupedFavorites(state),\n    mode: getConfig()!.get('mode')\n  }),\n  mapDispatchToProps: {\n    setSearchText\n  },\n  component: React.memo(SchedulePage)\n});"]},"metadata":{},"sourceType":"module"}