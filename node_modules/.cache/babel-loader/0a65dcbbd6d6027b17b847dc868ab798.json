{"ast":null,"code":"import _regeneratorRuntime from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{Plugins}from'@capacitor/core';var Storage=Plugins.Storage;var dataUrl='/assets/data/data.json';var locationsUrl='/assets/data/locations.json';var HAS_LOGGED_IN='hasLoggedIn';var HAS_SEEN_TUTORIAL='hasSeenTutorial';var USERNAME='username';export var getConfData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,responseData,schedule,sessions,speakers,locations,allTracks,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Promise.all([fetch(dataUrl),fetch(locationsUrl)]);case 2:response=_context.sent;_context.next=5;return response[0].json();case 5:responseData=_context.sent;schedule=responseData.schedule[0];sessions=parseSessions(schedule);speakers=responseData.speakers;_context.next=11;return response[1].json();case 11:locations=_context.sent;allTracks=sessions.reduce(function(all,session){return all.concat(session.tracks);},[]).filter(function(trackName,index,array){return array.indexOf(trackName)===index;}).sort();data={schedule:schedule,sessions:sessions,locations:locations,speakers:speakers,allTracks:allTracks,filteredTracks:_toConsumableArray(allTracks)};return _context.abrupt(\"return\",data);case 15:case\"end\":return _context.stop();}}},_callee);}));return function getConfData(){return _ref.apply(this,arguments);};}();export var getUserData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response,isLoggedin,hasSeenTutorial,username,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Promise.all([Storage.get({key:HAS_LOGGED_IN}),Storage.get({key:HAS_SEEN_TUTORIAL}),Storage.get({key:USERNAME})]);case 2:response=_context2.sent;_context2.next=5;return response[0].value;case 5:_context2.t0=_context2.sent;isLoggedin=_context2.t0==='true';_context2.next=9;return response[1].value;case 9:_context2.t1=_context2.sent;hasSeenTutorial=_context2.t1==='true';_context2.next=13;return response[2].value;case 13:_context2.t2=_context2.sent;if(_context2.t2){_context2.next=16;break;}_context2.t2=undefined;case 16:username=_context2.t2;data={isLoggedin:isLoggedin,hasSeenTutorial:hasSeenTutorial,username:username};return _context2.abrupt(\"return\",data);case 19:case\"end\":return _context2.stop();}}},_callee2);}));return function getUserData(){return _ref2.apply(this,arguments);};}();export var setIsLoggedInData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(isLoggedIn){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Storage.set({key:HAS_LOGGED_IN,value:JSON.stringify(isLoggedIn)});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function setIsLoggedInData(_x){return _ref3.apply(this,arguments);};}();export var setHasSeenTutorialData=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(hasSeenTutorial){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Storage.set({key:HAS_SEEN_TUTORIAL,value:JSON.stringify(hasSeenTutorial)});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function setHasSeenTutorialData(_x2){return _ref4.apply(this,arguments);};}();export var setUsernameData=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(username){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(username){_context5.next=5;break;}_context5.next=3;return Storage.remove({key:USERNAME});case 3:_context5.next=7;break;case 5:_context5.next=7;return Storage.set({key:USERNAME,value:username});case 7:case\"end\":return _context5.stop();}}},_callee5);}));return function setUsernameData(_x3){return _ref5.apply(this,arguments);};}();function parseSessions(schedule){var sessions=[];schedule.groups.forEach(function(g){g.sessions.forEach(function(s){return sessions.push(s);});});return sessions;}","map":{"version":3,"sources":["/home/fazna/cleanit/src/data/dataApi.ts"],"names":["Plugins","Storage","dataUrl","locationsUrl","HAS_LOGGED_IN","HAS_SEEN_TUTORIAL","USERNAME","getConfData","Promise","all","fetch","response","json","responseData","schedule","sessions","parseSessions","speakers","locations","allTracks","reduce","session","concat","tracks","filter","trackName","index","array","indexOf","sort","data","filteredTracks","getUserData","get","key","value","isLoggedin","hasSeenTutorial","undefined","username","setIsLoggedInData","isLoggedIn","set","JSON","stringify","setHasSeenTutorialData","setUsernameData","remove","groups","forEach","g","s","push"],"mappings":"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","sourcesContent":["import { Plugins } from '@capacitor/core';\nimport { Schedule, Session } from '../models/Schedule';\nimport { Speaker } from '../models/Speaker';\nimport { Location } from '../models/Location';\n\nconst { Storage } = Plugins;\nconst dataUrl = '/assets/data/data.json';\nconst locationsUrl = '/assets/data/locations.json';\n\nconst HAS_LOGGED_IN = 'hasLoggedIn';\nconst HAS_SEEN_TUTORIAL = 'hasSeenTutorial';\nconst USERNAME = 'username';\n\nexport const getConfData = async () => {\n  const response = await Promise.all([\n    fetch(dataUrl),\n    fetch(locationsUrl)]);\n  const responseData = await response[0].json();\n  const schedule = responseData.schedule[0] as Schedule;\n  const sessions = parseSessions(schedule);\n  const speakers = responseData.speakers as Speaker[];\n  const locations = await response[1].json() as Location[];\n  const allTracks = sessions\n    .reduce((all, session) => all.concat(session.tracks), [] as string[])\n    .filter((trackName, index, array) => array.indexOf(trackName) === index)\n    .sort();\n\n  const data = {\n    schedule,\n    sessions,\n    locations,\n    speakers,\n    allTracks,\n    filteredTracks: [...allTracks]\n  }\n  return data;\n}\n\nexport const getUserData = async () => {\n  const response = await Promise.all([\n    Storage.get({ key: HAS_LOGGED_IN }),\n    Storage.get({ key: HAS_SEEN_TUTORIAL }),\n    Storage.get({ key: USERNAME })]);\n  const isLoggedin = await response[0].value === 'true';\n  const hasSeenTutorial = await response[1].value === 'true';\n  const username = await response[2].value || undefined;\n  const data = {\n    isLoggedin,\n    hasSeenTutorial,\n    username\n  }\n  return data;\n}\n\nexport const setIsLoggedInData = async (isLoggedIn: boolean) => {\n  await Storage.set({ key: HAS_LOGGED_IN, value: JSON.stringify(isLoggedIn) });\n}\n\nexport const setHasSeenTutorialData = async (hasSeenTutorial: boolean) => {\n  await Storage.set({ key: HAS_SEEN_TUTORIAL, value: JSON.stringify(hasSeenTutorial) });\n}\n\nexport const setUsernameData = async (username?: string) => {\n  if (!username) {\n    await Storage.remove({ key: USERNAME });\n  } else {\n    await Storage.set({ key: USERNAME, value: username });\n  }\n}\n\nfunction parseSessions(schedule: Schedule) {\n  const sessions: Session[] = [];\n  schedule.groups.forEach(g => {\n    g.sessions.forEach(s => sessions.push(s))\n  });\n  return sessions;\n}\n"]},"metadata":{},"sourceType":"module"}