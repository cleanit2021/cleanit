{"ast":null,"code":"import _regeneratorRuntime from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{IonHeader,IonToolbar,IonTitle,IonContent,IonPage,IonButtons,IonMenuButton,IonRow,IonCol,IonButton,IonList,IonItem,IonLabel,IonInput,IonText,IonModal,IonAlert,IonCard,IonCardContent}from'@ionic/react';import'./Login.scss';import{setIsLoggedIn,setUsername}from'../data/user/user.actions';import{connect}from'../data/connect';import firebase from\"firebase/app\";import\"firebase/auth\";var Login=function Login(_ref){var setIsLoggedIn=_ref.setIsLoggedIn,history=_ref.history,setUsernameAction=_ref.setUsername;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),formSubmitted=_useState6[0],setFormSubmitted=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),usernameError=_useState8[0],setUsernameError=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),passwordError=_useState10[0],setPasswordError=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showModal=_useState12[0],setShowModal=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),showAlert1=_useState14[0],setShowAlert1=_useState14[1];// React.useEffect(()=>{\n// })\nvar login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:window.recaptchaVerifier=new firebase.auth.RecaptchaVerifier('recaptcha-container');e.preventDefault();// setFormSubmitted(true);\nif(!username){setUsernameError(true);}if(!password){setPasswordError(true);}if(username){// window.recaptchaVerifier = \nfirebase.auth().signInWithPhoneNumber('+91'+username,window.recaptchaVerifier).then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(confirmationResult){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:console.log(confirmationResult,typeof confirmationResult);window.confirmationResult=confirmationResult;setShowModal(true);case 3:case\"end\":return _context.stop();}}},_callee);}));return function(_x2){return _ref3.apply(this,arguments);};}()).catch(function(error){// Error; SMS not sent\n// ...\nsetPasswordError(true);});}case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function login(_x){return _ref2.apply(this,arguments);};}();var otpSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(otp){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setShowModal(false);// if(confirmationRes!=={})\nwindow.confirmationResult.confirm(otp).then(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(result){var user;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// User signed in successfully.\nuser=result.user;_context3.next=3;return setIsLoggedIn(true);case 3:_context3.next=5;return setUsernameAction(user);case 5:setShowAlert1(true);history.push('/login',{direction:'none'});// ...\ncase 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x4){return _ref5.apply(this,arguments);};}()).catch(function(error){// User couldn't sign in (bad verification code?)\n// ...\n});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return function otpSubmit(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(IonPage,{id:\"signup-page\"},/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonButtons,{slot:\"start\"},/*#__PURE__*/React.createElement(IonMenuButton,null)),/*#__PURE__*/React.createElement(IonTitle,null,\"Signup\"))),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(\"div\",{className:\"login-logo\"},/*#__PURE__*/React.createElement(\"img\",{src:\"data:image/png;base64,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\",alt:\"Ionic logo\"})),/*#__PURE__*/React.createElement(\"form\",{noValidate:true,onSubmit:login},/*#__PURE__*/React.createElement(IonList,null,/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Phone Number\"),/*#__PURE__*/React.createElement(IonInput,{name:\"username\",type:\"number\",value:username,spellCheck:false,autocapitalize:\"off\",onIonChange:function onIonChange(e){setUsername(e.detail.value);setUsernameError(false);},required:true})),formSubmitted&&usernameError&&/*#__PURE__*/React.createElement(IonText,{color:\"danger\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ion-padding-start\"},\"Username is required\")),formSubmitted&&passwordError&&/*#__PURE__*/React.createElement(IonText,{color:\"danger\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ion-padding-start\"},\"Error in code\"))),/*#__PURE__*/React.createElement(\"div\",{style:{margin:'10px'},id:\"recaptcha-container\"}),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{type:\"submit\",expand:\"block\",id:\"sign-in-button\"},\"Send OTP\")))),/*#__PURE__*/React.createElement(IonModal,{isOpen:showModal,cssClass:\"my-custom-class\"},/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonButtons,{slot:\"start\"},/*#__PURE__*/React.createElement(IonMenuButton,null)),/*#__PURE__*/React.createElement(IonTitle,null,\"OTP\")),/*#__PURE__*/React.createElement(IonCard,null,/*#__PURE__*/React.createElement(IonCardContent,null,/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonText,null,\"+91 \",username)),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Enter your OTP\"),/*#__PURE__*/React.createElement(IonInput,{name:\"otp\",type:\"number\",value:password,maxlength:1,onIonChange:function onIonChange(e){setPassword(e.detail.value);setPasswordError(false);}})),/*#__PURE__*/React.createElement(IonButton,{expand:\"block\",onClick:function onClick(){return otpSubmit(password);}},\"Submit\")))),/*#__PURE__*/React.createElement(IonAlert,{isOpen:showAlert1,onDidDismiss:function onDidDismiss(){setShowAlert1(false);},cssClass:\"my-custom-class\",header:'Registration Successfull',message:'Enter your details to continue',buttons:['OK']}))));};export default connect({mapDispatchToProps:{setIsLoggedIn:setIsLoggedIn,setUsername:setUsername},component:Login});","map":{"version":3,"sources":["/home/fazna/cleanit/src/pages/Signup.tsx"],"names":["React","useState","IonHeader","IonToolbar","IonTitle","IonContent","IonPage","IonButtons","IonMenuButton","IonRow","IonCol","IonButton","IonList","IonItem","IonLabel","IonInput","IonText","IonModal","IonAlert","IonCard","IonCardContent","setIsLoggedIn","setUsername","connect","firebase","Login","history","setUsernameAction","username","password","setPassword","formSubmitted","setFormSubmitted","usernameError","setUsernameError","passwordError","setPasswordError","showModal","setShowModal","showAlert1","setShowAlert1","login","e","window","recaptchaVerifier","auth","RecaptchaVerifier","preventDefault","signInWithPhoneNumber","then","confirmationResult","console","log","catch","error","otpSubmit","otp","confirm","result","user","push","direction","detail","value","margin","mapDispatchToProps","component"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { IonHeader, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton, IonRow, IonCol, IonButton, IonList, IonItem, IonLabel, IonInput, IonText, IonModal, IonAlert, IonCard, IonCardContent, IonRouterLink } from '@ionic/react';\nimport './Login.scss';\nimport { setIsLoggedIn, setUsername } from '../data/user/user.actions';\nimport { connect } from '../data/connect';\nimport { RouteComponentProps } from 'react-router';\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\ninterface OwnProps extends RouteComponentProps {}\n\ninterface DispatchProps {\n  setIsLoggedIn: typeof setIsLoggedIn;\n  setUsername: typeof setUsername;\n}\n\ninterface LoginProps extends OwnProps,  DispatchProps { }\n\nconst Login: React.FC<LoginProps> = ({setIsLoggedIn, history, setUsername: setUsernameAction}) => {\n\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [formSubmitted, setFormSubmitted] = useState(false);\n  const [usernameError, setUsernameError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n  const [showModal, setShowModal] = useState(false);\n  const [showAlert1, setShowAlert1] = useState(false);\n  \n  \n   \n  \n// React.useEffect(()=>{\n\n// })\n  const login = async (e: React.FormEvent) => {\n\n    window.recaptchaVerifier = new firebase.auth.RecaptchaVerifier('recaptcha-container');\n\n    e.preventDefault();\n    // setFormSubmitted(true);\n    if(!username) {\n      setUsernameError(true);\n    }\n    if(!password) {\n      setPasswordError(true);\n    }\n\n    if(username) {\n      // window.recaptchaVerifier = \n      \n      firebase.auth().signInWithPhoneNumber(\n        '+91'+username,\n        window.recaptchaVerifier\n        )\n        .then(async(confirmationResult) => {\n      console.log(confirmationResult,typeof(confirmationResult))\n      window.confirmationResult=confirmationResult\n      setShowModal(true)\n     \n    }).catch((error) => {\n      // Error; SMS not sent\n      // ...\n      setPasswordError(true)\n    }); \n    }\n   \n  };\n  const otpSubmit = async(otp:string) => {\n    setShowModal(false)\n    // if(confirmationRes!=={})\n    \n    window.confirmationResult.confirm(otp).then(async(result:any) => {\n      // User signed in successfully.\n      \n      const user = result.user;\n      await setIsLoggedIn(true);\n      await setUsernameAction(user);\n      setShowAlert1(true)\n      history.push('/login', {direction: 'none'});\n      // ...\n    }).catch((error:any) => {\n      // User couldn't sign in (bad verification code?)\n      // ...\n    });\n  }\n  return (\n    <IonPage id=\"signup-page\">\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton></IonMenuButton>\n          </IonButtons>\n          <IonTitle>Signup</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n\n        <div className=\"login-logo\">\n          <img src=\"data:image/png;base64,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\" alt=\"Ionic logo\" />\n        </div>\n          <form noValidate onSubmit={login}>\n          <IonList>\n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Phone Number</IonLabel>\n              <IonInput name=\"username\" type=\"number\" value={username} spellCheck={false} autocapitalize=\"off\" onIonChange={e => {\n                setUsername(e.detail.value!);\n                setUsernameError(false);\n              }}\n                required>\n              </IonInput>\n            </IonItem>\n\n            {formSubmitted && usernameError && <IonText color=\"danger\">\n              <p className=\"ion-padding-start\">\n                Username is required\n              </p>\n            </IonText>}\n\n            {/* <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Password</IonLabel>\n              <IonInput name=\"password\" type=\"password\" value={password} onIonChange={e => {\n                setPassword(e.detail.value!);\n                setPasswordError(false);\n              }}>\n              </IonInput>\n            </IonItem> */}\n\n            {formSubmitted && passwordError && <IonText color=\"danger\">\n              <p className=\"ion-padding-start\">\n                Error in code\n              </p>\n            </IonText>}\n          </IonList>\n          <div style={{margin:'10px'}} id=\"recaptcha-container\"></div>\n          <IonRow>\n            <IonCol>\n              <IonButton type=\"submit\" expand=\"block\" id=\"sign-in-button\">Send OTP</IonButton>\n            </IonCol>\n          </IonRow>\n        </form>\n        <IonModal isOpen={showModal} cssClass='my-custom-class'>\n          <IonContent>\n          <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton></IonMenuButton>\n          </IonButtons>\n          <IonTitle>OTP</IonTitle>\n        </IonToolbar>\n        <IonCard>\n          <IonCardContent>\n            <IonItem>\n              <IonText>\n                +91 {username}\n              </IonText>\n              \n            </IonItem>\n            <IonItem>\n                <IonLabel position=\"stacked\" color=\"primary\">Enter your OTP</IonLabel>\n                <IonInput name=\"otp\" type=\"number\" value={password} maxlength={1} onIonChange={e => {\n                  setPassword(e.detail.value!);\n                  setPasswordError(false);\n                }}>\n                </IonInput>\n            </IonItem> \n            <IonButton expand=\"block\" onClick={() => otpSubmit(password)}>Submit</IonButton>\n\n          </IonCardContent>\n        </IonCard>\n            \n            </IonContent>\n        <IonAlert\n          isOpen={showAlert1}\n          onDidDismiss={() => {\n            \n            setShowAlert1(false)}}\n          cssClass='my-custom-class'\n          header={'Registration Successfull'}\n          message={'Enter your details to continue'}\n          buttons={['OK']}\n        />\n      </IonModal>\n      </IonContent>\n\n    </IonPage>\n  );\n};\n\nexport default connect<OwnProps, {}, DispatchProps>({\n  mapDispatchToProps: {\n    setIsLoggedIn,\n    setUsername\n  },\n  component: Login\n})"]},"metadata":{},"sourceType":"module"}