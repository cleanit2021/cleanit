{"ast":null,"code":"import _regeneratorRuntime from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{IonHeader,IonToolbar,IonTitle,IonContent,IonPage,IonButtons,IonMenuButton,IonRow,IonCol,IonButton,IonList,IonItem,IonLabel,IonText,IonSelect,IonSelectOption}from'@ionic/react';import'./Login.scss';import{setIsLoggedIn,setUsername}from'../data/user/user.actions';import{connect}from'../data/connect';import{Plugins,CameraResultType,CameraSource}from'@capacitor/core';import firebase from'firebase/app';import'firebase/firestore';var Camera=Plugins.Camera;var BookSlot=function BookSlot(_ref){var setIsLoggedIn=_ref.setIsLoggedIn,history=_ref.history,setUsernameAction=_ref.setUsername;var sampleimageurl='https://img-getpocket.cdn.mozilla.net/296x148/filters:format(jpeg):quality(60):no_upscale():strip_exif()/https%3A%2F%2Fpocket-image-cache.com%2F1200x%2Ffilters%3Ano_upscale()%3Aformat(jpg)%3Aextract_cover()%2Fhttps%253A%252F%252Fpocket-syndicated-images.s3.amazonaws.com%252Farticles%252F5204%252F1595959480_GettyImages-129164329.jpgcrop.jpg22.jpg';var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),time=_useState4[0],setTime=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),coord=_useState8[0],setCoord=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),location=_useState10[0],setLocation=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),image=_useState12[0],setImage=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),gpsEnable=_useState14[0],setGpsEnabled=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),formSubmitted=_useState16[0],setFormSubmitted=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),usernameError=_useState18[0],setUsernameError=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),passwordError=_useState20[0],setPasswordError=_useState20[1];var timeslots=['10-12pm','2pm-4pm','6pm-7pm'];var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var db,data,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();//ADD DATA TO DB\ndb=firebase.firestore();data={date:'12-10-19',image:image,time:time};_context.next=5;return db.collection('waste_collection_details').doc('751098867').set(data);case 5:res=_context.sent;console.log(res);case 7:case\"end\":return _context.stop();}}},_callee);}));return function login(_x){return _ref2.apply(this,arguments);};}();var getPicture=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:// const res = await ImagePicker.getPictures({})\nres=addImage(CameraSource.Photos);console.log(\"picture\",res);case 2:case\"end\":return _context2.stop();}}},_callee2);}));return function getPicture(){return _ref3.apply(this,arguments);};}();var addImage=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(source){var images;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return Camera.getPhoto({quality:60,allowEditing:true,resultType:CameraResultType.DataUrl,source:source});case 2:images=_context3.sent;// const blobData = b64toBlob(images.base64String, `image/${images.format}`);\n// const imageName = 'Give me a name';\nconsole.log(\"imgae\",images);setImage(images);// this.api.uploadImage(blobData, imageName, image.format).subscribe((newImage: ApiImage) => {\n//   this.images.push(newImage);\n// });\ncase 5:case\"end\":return _context3.stop();}}},_callee3);}));return function addImage(_x2){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(IonPage,{id:\"details-page\"},/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonButtons,{slot:\"start\"},/*#__PURE__*/React.createElement(IonMenuButton,null)),/*#__PURE__*/React.createElement(IonTitle,null,\"Book Your Slot\"))),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(\"form\",{noValidate:true,onSubmit:login},/*#__PURE__*/React.createElement(IonList,null,/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Select Date\")),formSubmitted&&usernameError&&/*#__PURE__*/React.createElement(IonText,{color:\"danger\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ion-padding-start\"},\"Date is required\")),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Time\"),/*#__PURE__*/React.createElement(IonSelect,{value:time,placeholder:\"Select One\",onIonChange:function onIonChange(e){return setTime(e.detail.value);}},timeslots.map(function(i){return/*#__PURE__*/React.createElement(IonSelectOption,{value:i},i);}))),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Picture\"),/*#__PURE__*/React.createElement(IonButton,{color:\"primary\",onClick:function onClick(){getPicture();}},\"Get Picture\")),image!==null&&/*#__PURE__*/React.createElement(\"div\",{style:{margin:'20px'}},/*#__PURE__*/React.createElement(\"img\",{style:{marginTop:'10px'},src:image.dataUrl}))),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{type:\"submit\",expand:\"block\",onClick:function onClick(e){return login(e);}},\"Submit\"))))));};export default connect({mapDispatchToProps:{setIsLoggedIn:setIsLoggedIn,setUsername:setUsername},component:BookSlot});","map":{"version":3,"sources":["/home/fazna/cleanit/src/pages/BookSlot.tsx"],"names":["React","useState","IonHeader","IonToolbar","IonTitle","IonContent","IonPage","IonButtons","IonMenuButton","IonRow","IonCol","IonButton","IonList","IonItem","IonLabel","IonText","IonSelect","IonSelectOption","setIsLoggedIn","setUsername","connect","Plugins","CameraResultType","CameraSource","firebase","Camera","BookSlot","history","setUsernameAction","sampleimageurl","username","time","setTime","date","setDate","coord","setCoord","location","setLocation","image","setImage","gpsEnable","setGpsEnabled","formSubmitted","setFormSubmitted","usernameError","setUsernameError","passwordError","setPasswordError","timeslots","login","e","preventDefault","db","firestore","data","collection","doc","set","res","console","log","getPicture","addImage","Photos","source","getPhoto","quality","allowEditing","resultType","DataUrl","images","detail","value","map","i","margin","marginTop","dataUrl","mapDispatchToProps","component"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { IonHeader, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton, IonRow, IonCol, IonButton, IonList, IonItem, IonLabel, IonInput, IonText, IonTextarea, IonToggle, IonSelect, IonItemOption, IonSelectOption, IonIcon } from '@ionic/react';\nimport './Login.scss';\nimport { setIsLoggedIn, setUsername } from '../data/user/user.actions';\nimport { connect } from '../data/connect';\nimport { RouteComponentProps } from 'react-router';\nimport { Plugins, CameraResultType, CameraSource ,CameraPhoto} from '@capacitor/core';\nimport firebase from 'firebase/app'\nimport 'firebase/firestore';\n\nconst { Camera } = Plugins;\ninterface OwnProps extends RouteComponentProps {}\n\ninterface DispatchProps {\n  setIsLoggedIn: typeof setIsLoggedIn;\n  setUsername: typeof setUsername;\n}\n// const db = firebase.firestore()\ninterface LoginProps extends OwnProps,  DispatchProps { }\ninterface PhotoData extends CameraPhoto {}\nconst BookSlot: React.FC<LoginProps> = ({setIsLoggedIn, history, setUsername: setUsernameAction}) => {\n  const sampleimageurl = 'https://img-getpocket.cdn.mozilla.net/296x148/filters:format(jpeg):quality(60):no_upscale():strip_exif()/https%3A%2F%2Fpocket-image-cache.com%2F1200x%2Ffilters%3Ano_upscale()%3Aformat(jpg)%3Aextract_cover()%2Fhttps%253A%252F%252Fpocket-syndicated-images.s3.amazonaws.com%252Farticles%252F5204%252F1595959480_GettyImages-129164329.jpgcrop.jpg22.jpg'\n  const [username, setUsername] = useState('');\n  const [time, setTime] = useState('');\n  const [date,setDate] = useState('');\n  const [coord,setCoord] = useState('');\n  const [location,setLocation] = useState('');\n  const [image,setImage] = useState<PhotoData | null>(null)\n  const [gpsEnable,setGpsEnabled] = useState(false)\n  const [formSubmitted, setFormSubmitted] = useState(false);\n  const [usernameError, setUsernameError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\nconst timeslots = ['10-12pm','2pm-4pm','6pm-7pm']\n  const login = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    //ADD DATA TO DB\n\n    const db = firebase.firestore()\n    const data = {\n      date:'12-10-19',\n      image:image,\n      time:time\n    }\n    let res = await db.collection('waste_collection_details').doc('751098867').set(data)\n\n    console.log(res)\n  };\n  const getPicture = async() => {\n      // const res = await ImagePicker.getPictures({})\n      const res = addImage(CameraSource.Photos)\n      console.log(\"picture\",res)\n  }\n  const addImage  = async(source: CameraSource) => {\n    const images = await Camera.getPhoto({\n      quality: 60,\n      allowEditing: true,\n      resultType: CameraResultType.DataUrl,\n      source\n    });\n \n    // const blobData = b64toBlob(images.base64String, `image/${images.format}`);\n    // const imageName = 'Give me a name';\n \n    console.log(\"imgae\",images)\n    setImage(images)\n    // this.api.uploadImage(blobData, imageName, image.format).subscribe((newImage: ApiImage) => {\n    //   this.images.push(newImage);\n    // });\n\n  }\n  \n \n  \n  return (\n    <IonPage id=\"details-page\">\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton></IonMenuButton>\n          </IonButtons>\n          <IonTitle>Book Your Slot</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n\n        <form noValidate onSubmit={login}>\n          <IonList>\n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Select Date</IonLabel>\n              \n\n            </IonItem>\n\n            {formSubmitted && usernameError && <IonText color=\"danger\">\n              <p className=\"ion-padding-start\">\n                Date is required\n              </p>\n            </IonText>}\n\n            \n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Time</IonLabel>\n              <IonSelect value={time} placeholder=\"Select One\" onIonChange={e => setTime(e.detail.value)}>\n                \n                {timeslots.map(i => \n                <IonSelectOption value={i}>{i}</IonSelectOption>\n                    )}\n              </IonSelect>\n            </IonItem>\n           \n            \n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Picture</IonLabel>\n              <IonButton color=\"primary\" onClick={()=>{getPicture()}}>Get Picture</IonButton>\n            </IonItem>\n            {image!==null && \n            <div style={{margin:'20px'}}>\n              {/* <IonIcon  */}\n              <img style={{marginTop:'10px'}} src={image.dataUrl}/></div>}\n              {/* <div style={{margin:'20px'}}>\n  <img style={{marginTop:'10px'}} src={sampleimageurl}/></div>\n               */}\n          </IonList>\n\n          <IonRow>\n            <IonCol>\n              <IonButton type=\"submit\" expand=\"block\" onClick={(e)=>login(e)}>Submit</IonButton>\n            </IonCol>\n            {/* <IonCol>\n              <IonButton routerLink=\"/signup\" color=\"light\" expand=\"block\">Signup</IonButton>\n            </IonCol> */}\n          </IonRow>\n        </form>\n\n      </IonContent>\n\n    </IonPage>\n  );\n};\n\nexport default connect<OwnProps, {}, DispatchProps>({\n  mapDispatchToProps: {\n    setIsLoggedIn,\n    setUsername\n  },\n  component: BookSlot\n})"]},"metadata":{},"sourceType":"module"}