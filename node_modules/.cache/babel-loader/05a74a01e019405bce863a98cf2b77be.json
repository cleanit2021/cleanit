{"ast":null,"code":"import _regeneratorRuntime from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{IonHeader,IonDatetime,IonToolbar,IonTitle,IonContent,IonPage,IonButtons,IonMenuButton,IonRow,IonCol,IonButton,IonList,IonItem,IonLabel,IonText,IonSelect,IonSelectOption}from'@ionic/react';import'./Login.scss';import{setIsLoggedIn,setUsername}from'../data/user/user.actions';import{connect}from'../data/connect';import{Plugins,CameraResultType,CameraSource}from'@capacitor/core';import firebase from'firebase/app';import'firebase/firestore';import{getUserData}from'../data/dataApi';var Camera=Plugins.Camera,Dialog=Plugins.Dialog,Toast=Plugins.Toast;var BookSlot=function BookSlot(_ref){var setIsLoggedIn=_ref.setIsLoggedIn,history=_ref.history,setUsernameAction=_ref.setUsername;var sampleimageurl='https://img-getpocket.cdn.mozilla.net/296x148/filters:format(jpeg):quality(60):no_upscale():strip_exif()/https%3A%2F%2Fpocket-image-cache.com%2F1200x%2Ffilters%3Ano_upscale()%3Aformat(jpg)%3Aextract_cover()%2Fhttps%253A%252F%252Fpocket-syndicated-images.s3.amazonaws.com%252Farticles%252F5204%252F1595959480_GettyImages-129164329.jpgcrop.jpg22.jpg';var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),time=_useState4[0],setTime=_useState4[1];var _useState5=useState('2021-06-15'),_useState6=_slicedToArray(_useState5,2),date=_useState6[0],setDate=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),coord=_useState8[0],setCoord=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),location=_useState10[0],setLocation=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),image=_useState12[0],setImage=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),gpsEnable=_useState14[0],setGpsEnabled=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),formSubmitted=_useState16[0],setFormSubmitted=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),usernameError=_useState18[0],setUsernameError=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),passwordError=_useState20[0],setPasswordError=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),loading=_useState22[0],setLoading=_useState22[1];var _useState23=useState(''),_useState24=_slicedToArray(_useState23,2),phone=_useState24[0],setPhone=_useState24[1];useEffect(function(){function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUserData();case 2:res=_context.sent;setPhone(res.username);console.log(res);case 5:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}getData();},[getUserData]);function alert(){return _alert.apply(this,arguments);}function _alert(){_alert=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(){return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:_context5.prev=0;_context5.next=3;return Dialog.alert({title:'Successfully Updated',message:\"You have selected \".concat(time,\" on \").concat(date)});case 3:_context5.next=10;break;case 5:_context5.prev=5;_context5.t0=_context5[\"catch\"](0);console.log(_context5.t0);_context5.next=10;return Toast.show({text:\"You have selected \".concat(time,\" on \").concat(date)});case 10:case\"end\":return _context5.stop();}}},_callee5,null,[[0,5]]);}));return _alert.apply(this,arguments);}var timeslots=['10-12pm','2pm-4pm','6pm-7pm'];useEffect(function(){console.log(date);alert();},[date]);var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var db,data,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);e.preventDefault();//ADD DATA TO DB\ndb=firebase.firestore();data={date:'12-10-19',image:image,time:time};_context2.prev=4;_context2.next=7;return db.collection('waste_collection_details').doc(phone).set(data);case 7:res=_context2.sent;console.log(res);alert();history.push('/dashboard',{direction:'none'});_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](4);console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}}},_callee2,null,[[4,13]]);}));return function login(_x){return _ref2.apply(this,arguments);};}();var getPicture=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:// const res = await ImagePicker.getPictures({})\nres=addImage(CameraSource.Photos);console.log(\"picture\",res);case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function getPicture(){return _ref3.apply(this,arguments);};}();var addImage=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(source){var images;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.prev=0;_context4.next=3;return Camera.getPhoto({quality:60,allowEditing:true,resultType:CameraResultType.DataUrl,source:source});case 3:images=_context4.sent;if(images){console.log(\"imgae\",images);setImage(images);}_context4.next=10;break;case 7:_context4.prev=7;_context4.t0=_context4[\"catch\"](0);console.log(_context4.t0);case 10:case\"end\":return _context4.stop();}}},_callee4,null,[[0,7]]);}));return function addImage(_x2){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(IonPage,{id:\"details-page\"},/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonButtons,{slot:\"start\"},/*#__PURE__*/React.createElement(IonMenuButton,null)),/*#__PURE__*/React.createElement(IonTitle,null,\"Book Your Slot\"))),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(\"form\",{noValidate:true,onSubmit:login},/*#__PURE__*/React.createElement(IonList,null,/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Select Date\"),/*#__PURE__*/React.createElement(IonDatetime,{min:'2021-06-15',max:'2025-01-01',value:date,onIonChange:function onIonChange(e){return setDate(e.detail.value);}})),formSubmitted&&usernameError&&/*#__PURE__*/React.createElement(IonText,{color:\"danger\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ion-padding-start\"},\"Date is required\")),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Time\"),/*#__PURE__*/React.createElement(IonSelect,{value:time,placeholder:\"Select One\",onIonChange:function onIonChange(e){return setTime(e.detail.value);}},timeslots.map(function(i){return/*#__PURE__*/React.createElement(IonSelectOption,{value:i},i);}))),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Picture\"),/*#__PURE__*/React.createElement(IonButton,{style:{borderRadius:0},color:\"primary\",onClick:function onClick(){getPicture();}},\"Upload Picture\")),image!==null&&/*#__PURE__*/React.createElement(\"div\",{style:{margin:'20px'}},/*#__PURE__*/React.createElement(\"img\",{style:{marginTop:'10px'},src:image.dataUrl}))),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{disabled:loading,type:\"submit\",expand:\"block\",onClick:function onClick(e){return login(e);}},\"Submit\"))))));};export default connect({mapDispatchToProps:{setIsLoggedIn:setIsLoggedIn,setUsername:setUsername,getUserData:getUserData},component:BookSlot});","map":{"version":3,"sources":["/home/fazna/cleanit/src/pages/BookSlot.tsx"],"names":["React","useEffect","useState","IonHeader","IonDatetime","IonToolbar","IonTitle","IonContent","IonPage","IonButtons","IonMenuButton","IonRow","IonCol","IonButton","IonList","IonItem","IonLabel","IonText","IonSelect","IonSelectOption","setIsLoggedIn","setUsername","connect","Plugins","CameraResultType","CameraSource","firebase","getUserData","Camera","Dialog","Toast","BookSlot","history","setUsernameAction","sampleimageurl","username","time","setTime","date","setDate","coord","setCoord","location","setLocation","image","setImage","gpsEnable","setGpsEnabled","formSubmitted","setFormSubmitted","usernameError","setUsernameError","passwordError","setPasswordError","loading","setLoading","phone","setPhone","getData","res","console","log","alert","title","message","show","text","timeslots","login","e","preventDefault","db","firestore","data","collection","doc","set","push","direction","getPicture","addImage","Photos","source","getPhoto","quality","allowEditing","resultType","DataUrl","images","detail","value","map","i","borderRadius","margin","marginTop","dataUrl","mapDispatchToProps","component"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { IonHeader,IonDatetime, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton, IonRow, IonCol, IonButton, IonList, IonItem, IonLabel, IonInput, IonText, IonTextarea, IonToggle, IonSelect, IonItemOption, IonSelectOption, IonIcon } from '@ionic/react';\nimport './Login.scss';\nimport { setIsLoggedIn, setUsername } from '../data/user/user.actions';\nimport { connect } from '../data/connect';\nimport { RouteComponentProps } from 'react-router';\nimport { Plugins, CameraResultType, CameraSource ,CameraPhoto} from '@capacitor/core';\nimport firebase from 'firebase/app'\nimport 'firebase/firestore';\nimport { camera, pin, wifi, wine, warning, walk } from 'ionicons/icons';\nimport { getUserData } from '../data/dataApi';\n\n\nconst { Camera ,Dialog,Toast} = Plugins;\ninterface OwnProps extends RouteComponentProps {}\n\ninterface DispatchProps {\n  setIsLoggedIn: typeof setIsLoggedIn;\n  setUsername: typeof setUsername;\n  getUserData: typeof getUserData;\n}\n// const db = firebase.firestore()\ninterface LoginProps extends OwnProps,  DispatchProps { }\ninterface PhotoData extends CameraPhoto {}\nconst BookSlot: React.FC<LoginProps> = ({setIsLoggedIn, history, setUsername: setUsernameAction}) => {\n  const sampleimageurl = 'https://img-getpocket.cdn.mozilla.net/296x148/filters:format(jpeg):quality(60):no_upscale():strip_exif()/https%3A%2F%2Fpocket-image-cache.com%2F1200x%2Ffilters%3Ano_upscale()%3Aformat(jpg)%3Aextract_cover()%2Fhttps%253A%252F%252Fpocket-syndicated-images.s3.amazonaws.com%252Farticles%252F5204%252F1595959480_GettyImages-129164329.jpgcrop.jpg22.jpg'\n  const [username, setUsername] = useState('');\n  const [time, setTime] = useState('');\n  const [date,setDate] = useState('2021-06-15');\n  const [coord,setCoord] = useState('');\n  const [location,setLocation] = useState('');\n  const [image,setImage] = useState<PhotoData | null>(null)\n  const [gpsEnable,setGpsEnabled] = useState(false)\n  const [formSubmitted, setFormSubmitted] = useState(false);\n  const [usernameError, setUsernameError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n  const [loading,setLoading] = useState(false)\n  const [phone,setPhone] = useState('')\n\n  useEffect(()=>{\n    async function getData() {\n      let res = await getUserData()\n      setPhone(res.username)\n      console.log(res)\n     }\n    getData()\n  },[getUserData])\n\n  async function alert(){\n   try{\n    await Dialog.alert({\n      title: 'Successfully Updated',\n      message: `You have selected ${time} on ${date}`,\n    });\n   }catch(e){\n     console.log(e)\n     await Toast.show({\n      text: `You have selected ${time} on ${date}`\n     })\n   }\n  }\n\nconst timeslots = ['10-12pm','2pm-4pm','6pm-7pm']\nuseEffect(()=>{\n  console.log(date)\n  alert()\n},[date])\n  const login = async (e: React.FormEvent) => {\n    setLoading(true)\n    e.preventDefault();\n\n    //ADD DATA TO DB\n\n    const db = firebase.firestore()\n    const data = {\n      date:'12-10-19',\n      image:image,\n      time:time\n    }\n    try {\n\n      let res = await db.collection('waste_collection_details').doc(phone).set(data)\n\n      console.log(res)\n      alert()\n      history.push('/dashboard', {direction: 'none'});\n    }catch(e) {\n      console.log(e)\n    }\n    \n    \n    \n  };\n  const getPicture = async() => {\n      // const res = await ImagePicker.getPictures({})\n      const res = addImage(CameraSource.Photos)\n      console.log(\"picture\",res)\n  }\n  const addImage  = async(source: CameraSource) => {\n    try{\n      const images = await Camera.getPhoto({\n        quality: 60,\n        allowEditing: true,\n        resultType: CameraResultType.DataUrl,\n        source\n      });\n      if(images){\n        console.log(\"imgae\",images)\n        setImage(images)\n      }\n    }\n    catch(err){\n      console.log(err)\n    }\n \n    \n\n  }\n  \n \n  \n  return (\n    <IonPage id=\"details-page\">\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton></IonMenuButton>\n          </IonButtons>\n          <IonTitle>Book Your Slot</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n\n        <form noValidate onSubmit={login}>\n          <IonList>\n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Select Date</IonLabel>\n              <IonDatetime min={'2021-06-15'} max={'2025-01-01'} value={date} onIonChange={e => setDate(e.detail.value!)}/>\n              \n            </IonItem>\n\n            {formSubmitted && usernameError && <IonText color=\"danger\">\n              <p className=\"ion-padding-start\">\n                Date is required\n              </p>\n            </IonText>}\n\n            \n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Time</IonLabel>\n              <IonSelect value={time} placeholder=\"Select One\" onIonChange={e => setTime(e.detail.value)}>\n                \n                {timeslots.map(i => \n                <IonSelectOption value={i}>{i}</IonSelectOption>\n                    )}\n              </IonSelect>\n            </IonItem>\n           \n            \n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Picture</IonLabel>\n              <IonButton style={{borderRadius:0}} color=\"primary\" onClick={()=>{getPicture()}}>\n                {/* <IonIcon name=\"camera\"/> */}\n                Upload Picture</IonButton>\n            </IonItem>\n            {image!==null && \n            <div style={{margin:'20px'}}>\n              {/* <IonIcon  */}\n              <img style={{marginTop:'10px'}} src={image.dataUrl}/></div>}\n              {/* <div style={{margin:'20px'}}>\n  <img style={{marginTop:'10px'}} src={sampleimageurl}/></div>\n               */}\n          </IonList>\n\n          <IonRow>\n            <IonCol>\n              <IonButton disabled={loading} type=\"submit\" expand=\"block\" onClick={(e)=>login(e)}>Submit</IonButton>\n            </IonCol>\n            {/* <IonCol>\n              <IonButton routerLink=\"/signup\" color=\"light\" expand=\"block\">Signup</IonButton>\n            </IonCol> */}\n          </IonRow>\n        </form>\n\n      </IonContent>\n\n    </IonPage>\n  );\n};\n\nexport default connect<OwnProps, {}, DispatchProps>({\n  mapDispatchToProps: {\n    setIsLoggedIn,\n    setUsername,\n    getUserData\n  },\n  component: BookSlot\n})"]},"metadata":{},"sourceType":"module"}