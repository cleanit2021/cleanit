{"ast":null,"code":"import _regeneratorRuntime from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/fazna/cleanit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{IonHeader,IonToolbar,IonTitle,IonContent,IonPage,IonButtons,IonMenuButton,IonRow,IonCol,IonButton,IonList,IonItem,IonLabel,IonInput,IonText,IonTextarea,IonToggle}from'@ionic/react';import'./Login.scss';import{setIsLoggedIn,setUsername}from'../data/user/user.actions';import{connect}from'../data/connect';import firebase from'firebase/app';import'firebase/firestore';import{getUserData}from'../data/dataApi';import{Plugins}from'@capacitor/core';var Geolocation=Plugins.Geolocation;var Login=function Login(_ref){var setIsLoggedIn=_ref.setIsLoggedIn,history=_ref.history,setUsername=_ref.setUsername;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUserName=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),pincode=_useState4[0],setPincode=_useState4[1];var _useState5=useState({latitude:0,longitude:0}),_useState6=_slicedToArray(_useState5,2),coord=_useState6[0],setCoord=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),gpsEnable=_useState10[0],setGpsEnabled=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),formSubmitted=_useState12[0],setFormSubmitted=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),usernameError=_useState14[0],setUsernameError=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),passwordError=_useState16[0],setPasswordError=_useState16[1];var _useState17=useState(''),_useState18=_slicedToArray(_useState17,2),phone=_useState18[0],setPhone=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),loading=_useState20[0],setLoading=_useState20[1];var db=firebase.firestore();useEffect(function(){function getData(){return _getData.apply(this,arguments);}function _getData(){_getData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,docRef;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return getUserData();case 2:res=_context.sent;setPhone(res.username);console.log(res);if(phone!==''){docRef=db.collection(\"user_data\").doc(phone);docRef.get().then(function(doc){if(doc.exists){history.push('/dashboard',{direction:'none'});}});}case 6:case\"end\":return _context.stop();}}},_callee);}));return _getData.apply(this,arguments);}getData();},[getUserData]);var login=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var data,docRef;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();setLoading(true);setFormSubmitted(true);if(!username){setUsernameError(true);}data={name:username,coord:coord,location:location,pincode:pincode};docRef=db.collection(\"user_data\").doc(phone);docRef.get().then(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(doc){var res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!doc.exists){_context2.next=4;break;}console.log(\"Doc exists\");_context2.next=7;break;case 4:_context2.next=6;return db.collection('user_data').doc(phone).set(data);case 6:res=_context2.sent;case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref3.apply(this,arguments);};}()).catch(function(error){console.log(\"Error getting document:\",error);});history.push('/dashboard',{direction:'none'});case 8:case\"end\":return _context3.stop();}}},_callee3);}));return function login(_x){return _ref2.apply(this,arguments);};}();var getLocation=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var coordinates,_coordinates$coords,latitude,longitude;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return Geolocation.getCurrentPosition();case 2:coordinates=_context4.sent;_coordinates$coords=coordinates.coords,latitude=_coordinates$coords.latitude,longitude=_coordinates$coords.longitude;setCoord({latitude:latitude,longitude:longitude});console.log('Current position:',coordinates.coords);// api.get('http://api.positionstack.com/v1/forward?access_key=bce98239614aaa6f7954015a64f6bb76')\ncase 6:case\"end\":return _context4.stop();}}},_callee4);}));return function getLocation(){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(IonPage,{id:\"details-page\"},/*#__PURE__*/React.createElement(IonHeader,null,/*#__PURE__*/React.createElement(IonToolbar,null,/*#__PURE__*/React.createElement(IonButtons,{slot:\"start\"},/*#__PURE__*/React.createElement(IonMenuButton,null)),/*#__PURE__*/React.createElement(IonTitle,null,\"Details\"))),/*#__PURE__*/React.createElement(IonContent,null,/*#__PURE__*/React.createElement(\"form\",{noValidate:true,onSubmit:login},/*#__PURE__*/React.createElement(IonList,{className:\"div-with-space\"},/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Name\"),/*#__PURE__*/React.createElement(IonInput,{name:\"username\",type:\"text\",value:username,spellCheck:false,autocapitalize:\"off\",onIonChange:function onIonChange(e){return setUserName(e.detail.value);},required:true})),formSubmitted&&usernameError&&/*#__PURE__*/React.createElement(IonText,{color:\"danger\"},/*#__PURE__*/React.createElement(\"p\",{className:\"ion-padding-start\"},\"Name is required\")),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Pincode\"),/*#__PURE__*/React.createElement(IonInput,{name:\"age\",type:\"number\",value:pincode,spellCheck:false,autocapitalize:\"off\",onIonChange:function onIonChange(e){return setPincode(e.detail.value);},required:true})),/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Use GPS\"),/*#__PURE__*/React.createElement(IonToggle,{checked:gpsEnable,onIonChange:function onIonChange(e){return setGpsEnabled(e.detail.checked);}})),!gpsEnable&&/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Location\"),/*#__PURE__*/React.createElement(IonTextarea,{name:\"text\",value:location,spellCheck:false,autocapitalize:\"off\",onIonChange:function onIonChange(e){return setLocation(e.detail.value);},required:true})),gpsEnable&&/*#__PURE__*/React.createElement(IonItem,null,/*#__PURE__*/React.createElement(IonLabel,{position:\"stacked\",color:\"primary\"},\"Location\"),/*#__PURE__*/React.createElement(IonButton,{color:\"primary\",onClick:function onClick(){getLocation();}},\"Use Current Location\"))),/*#__PURE__*/React.createElement(IonRow,null,/*#__PURE__*/React.createElement(IonCol,null,/*#__PURE__*/React.createElement(IonButton,{disabled:loading,type:\"submit\",expand:\"block\",onClick:function onClick(e){return login(e);}},\"Submit\"))))));};export default connect({mapDispatchToProps:{setIsLoggedIn:setIsLoggedIn,setUsername:setUsername,getUserData:getUserData},component:Login});","map":{"version":3,"sources":["/home/fazna/cleanit/src/pages/Login.tsx"],"names":["React","useEffect","useState","IonHeader","IonToolbar","IonTitle","IonContent","IonPage","IonButtons","IonMenuButton","IonRow","IonCol","IonButton","IonList","IonItem","IonLabel","IonInput","IonText","IonTextarea","IonToggle","setIsLoggedIn","setUsername","connect","firebase","getUserData","Plugins","Geolocation","Login","history","username","setUserName","pincode","setPincode","latitude","longitude","coord","setCoord","location","setLocation","gpsEnable","setGpsEnabled","formSubmitted","setFormSubmitted","usernameError","setUsernameError","passwordError","setPasswordError","phone","setPhone","loading","setLoading","db","firestore","getData","res","console","log","docRef","collection","doc","get","then","exists","push","direction","login","e","preventDefault","data","name","set","catch","error","getLocation","getCurrentPosition","coordinates","coords","detail","value","checked","mapDispatchToProps","component"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { IonHeader, IonToolbar, IonTitle, IonContent, IonPage, IonButtons, IonMenuButton, IonRow, IonCol, IonButton, IonList, IonItem, IonLabel, IonInput, IonText, IonTextarea, IonToggle } from '@ionic/react';\nimport './Login.scss';\nimport { setIsLoggedIn, setUsername } from '../data/user/user.actions';\nimport { connect } from '../data/connect';\nimport { RouteComponentProps } from 'react-router';\nimport firebase from 'firebase/app'\nimport 'firebase/firestore';\nimport { getUserData } from '../data/dataApi';\nimport {  Plugins } from '@capacitor/core'\nconst { Geolocation } = Plugins\ninterface OwnProps extends RouteComponentProps {}\n\ninterface DispatchProps {\n  setIsLoggedIn: typeof setIsLoggedIn;\n  setUsername: typeof setUsername;\n  getUserData: typeof getUserData;\n}\n\ninterface LoginProps extends OwnProps,  DispatchProps { }\n\nconst Login: React.FC<LoginProps> = ({setIsLoggedIn, history, setUsername}) => {\n\n  const [username, setUserName] = useState('');\n  const [pincode,setPincode] = useState('');\n  const [coord,setCoord] = useState({latitude:0,longitude:0});\n  const [location,setLocation] = useState('');\n  const [gpsEnable,setGpsEnabled] = useState(false)\n  const [formSubmitted, setFormSubmitted] = useState(false);\n  const [usernameError, setUsernameError] = useState(false);\n  const [passwordError, setPasswordError] = useState(false);\n  const [phone,setPhone] = useState('')\n  const [loading,setLoading] = useState(false)\n\n  const db = firebase.firestore()\n  useEffect(()=>{\n    async function getData() {\n      let res = await getUserData()\n      setPhone(res.username)\n      console.log(res)\n      if(phone!==''){\n        var docRef = db.collection(\"user_data\").doc(phone);\n\n        docRef.get().then((doc) => {\n            if(doc.exists) {\n                history.push('/dashboard', {direction: 'none'});\n  \n            }})\n      }\n     \n    }\n    getData()\n  },[getUserData])\n\n  const login = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setLoading(true)\n    setFormSubmitted(true);\n    if(!username) {\n      setUsernameError(true);\n    }\n    \n    const data = {\n      name : username,\n      coord,\n      location,\n      pincode\n    }\n    var docRef = db.collection(\"user_data\").doc(phone);\n\n    docRef.get().then(async(doc) => {\n        if(doc.exists) {\n          console.log(\"Doc exists\");\n\n        } else {\n            // doc.data() will be undefined in this case\n            let res = await db.collection('user_data').doc(phone).set(data)\n        }\n    }).catch((error) => {\n        console.log(\"Error getting document:\", error);\n    });\n\n    \n      \n\n    \n    history.push('/dashboard', {direction: 'none'});\n\n  };\n  const getLocation = async() => {\n    const coordinates = await Geolocation.getCurrentPosition();\n    const {latitude,longitude} = coordinates.coords\n    setCoord({\n      latitude,longitude\n    })\n  console.log('Current position:', coordinates.coords);\n    // api.get('http://api.positionstack.com/v1/forward?access_key=bce98239614aaa6f7954015a64f6bb76')\n  }\n  return (\n    <IonPage id=\"details-page\">\n      <IonHeader>\n        <IonToolbar>\n          <IonButtons slot=\"start\">\n            <IonMenuButton></IonMenuButton>\n          </IonButtons>\n          <IonTitle>Details</IonTitle>\n        </IonToolbar>\n      </IonHeader>\n      <IonContent>\n\n        <form noValidate onSubmit={login}>\n          <IonList className=\"div-with-space\">\n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Name</IonLabel>\n              <IonInput name=\"username\" type=\"text\" value={username} spellCheck={false} autocapitalize=\"off\" onIonChange={e => setUserName(e.detail.value!)}\n                required>\n              </IonInput>\n            </IonItem>\n\n            {formSubmitted && usernameError && <IonText color=\"danger\">\n              <p className=\"ion-padding-start\">\n                Name is required\n              </p>\n            </IonText>}\n\n            \n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Pincode</IonLabel>\n              <IonInput name=\"age\" type=\"number\" value={pincode} spellCheck={false} autocapitalize=\"off\" onIonChange={e => setPincode(e.detail.value!)}\n                required>\n              </IonInput>\n            </IonItem>\n\n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Use GPS</IonLabel>\n              <IonToggle checked={gpsEnable} onIonChange={e => setGpsEnabled(e.detail.checked)} />\n            \n            </IonItem>\n            { !gpsEnable && \n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Location</IonLabel>\n              <IonTextarea name=\"text\" value={location} spellCheck={false} autocapitalize=\"off\" onIonChange={e => setLocation(e.detail.value!)}\n                required>\n              </IonTextarea>\n            </IonItem>}\n            { gpsEnable && \n            <IonItem>\n              <IonLabel position=\"stacked\" color=\"primary\">Location</IonLabel>\n              <IonButton color=\"primary\" onClick={()=>{getLocation()}}>Use Current Location</IonButton>\n            </IonItem>}\n          </IonList>\n\n          <IonRow>\n            <IonCol>\n              <IonButton disabled={loading} type=\"submit\" expand=\"block\" onClick={(e)=>login(e)}>Submit</IonButton>\n            </IonCol>\n            {/* <IonCol>\n              <IonButton routerLink=\"/signup\" color=\"light\" expand=\"block\">Signup</IonButton>\n            </IonCol> */}\n          </IonRow>\n        </form>\n\n      </IonContent>\n\n    </IonPage>\n  );\n};\n\nexport default connect<OwnProps, {}, DispatchProps>({\n  mapDispatchToProps: {\n    setIsLoggedIn,\n    setUsername,\n    getUserData\n  },\n  component: Login\n})"]},"metadata":{},"sourceType":"module"}